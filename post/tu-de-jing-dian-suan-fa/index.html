<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>图的经典算法 | Gridea</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://stevenXu1992.github.io/favicon.ico?v=1590552419624">
<link rel="stylesheet" href="https://stevenXu1992.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="1. 模版
public class Graph{
  public HashMap&lt;Integer, Node&gt; nodes;
  public HashSet&lt;Edge&gt; edges;
  public Grap..." />
    <meta name="keywords" content="图" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://stevenXu1992.github.io">
        <img src="https://stevenXu1992.github.io/images/avatar.png?v=1590552419624" class="site-logo">
        <h1 class="site-title">Gridea</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://stevenXu1992.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">图的经典算法</h2>
            <div class="post-date">2020-05-18</div>
            
            <div class="post-content" v-pre>
              <h2 id="1-模版">1. 模版</h2>
<pre><code class="language-java">public class Graph{
  public HashMap&lt;Integer, Node&gt; nodes;
  public HashSet&lt;Edge&gt; edges;
  public Graph(){
    nodes = new HashMap&lt;&gt;();
    edges = new HashSet&lt;&gt;();
  }
}

public class Node{
  public int value;
  public int in;
  public int out;
  public ArrayList&lt;Node&gt; nexts;
  public ArrayList&lt;Edge&gt; edges;
  public Node(int data){
    this.value = data;
    in = 0;
    out = 0;
    nexts = new ArrayList&lt;&gt;();
    edges = new ArrayList&lt;&gt;();
  }
}

public class Edge{
  public int weight;
  public Node from;
  public Node to;
  public Edge(int weight, Node from, Node to){
    this.weight = weight;
    this.from = from;
    this.to = to;
  }
}
</code></pre>
<h2 id="2-图的遍历">2. 图的遍历</h2>
<h3 id="21-宽度优先遍历">2.1 宽度优先遍历</h3>
<pre><code class="language-java">public static void BFS(Node node){
  if(node == null){
    return;
  }
  LinkedList&lt;Node&gt; queue = new LinkedList&lt;&gt;();
  HashSet&lt;Node&gt; set = new HashSet&lt;&gt;();
  queue.add(node);
  set.add(node);
  while(!queue.isEmpty()){
    Node cur = queue.poll();
    //具体遍历操作
    for(Node n : cur.nexts){
      if(!set.contains(n)){
        queue.add(n);
        set.add(n);
      }
    }
  }
}
</code></pre>
<h3 id="22-深度优先遍历">2.2 深度优先遍历</h3>
<pre><code class="language-java">public static void DFS(Node node){
  if(node == null){
    return;
  }
  Stack&lt;Node&gt; stack = new Stack&lt;&gt;();
  HashSet&lt;Node&gt; set = new HashSet&lt;&gt;();
  stack.push(node);
  set.add(node);
  //具体遍历操作
  while(!stack.isEmpty()){
    Node cur = stack.pop();
    for(Node n : cur.nexts){
      if(!set.contains(n)){
        stack.push(cur);
        stack.push(n);
        set.add(n);
        //具体遍历操作
        break;
      }
    }
  }
}
</code></pre>
<h2 id="3拓扑排序">3.拓扑排序</h2>
<pre><code class="language-java">public static List&lt;Node&gt; topologySort(Graph graph){
  HashMap&lt;Node, Integer&gt; map = new HashMap&lt;&gt;();
  LinkedList&lt;Node&gt; queue = new LinkedList&lt;&gt;();
  ArrayList&lt;Node&gt; list = new ArrayList&lt;&gt;();
  
  for(Node n : graph.nodes.values()){
    map.put(n, n.in);
    if(n.in == 0){
      queue.add(n);
    }
  }
  
  while(!queue.isEmpty()){
    Node cur = queue.pop();
    list.add(cur);
    for(Node n : cur.nexts){
      map.put(n, map.get(n) - 1);
      if(map.get(n) == 0){
        queue.add(n);
      }
    }
  }
  return list;
}
</code></pre>
<h2 id="4-prim算法">4. Prim算法</h2>
<pre><code class="language-java">public static class EdgeComparator implements Comparator&lt;Edge&gt;{
  public int compare(Edge o1, Edge o2){
    //自定义比较器:
    // o1 - o2 &lt; 0 : o1 --&gt; o2
    // o2 - o1 &lt; 0 : o2 --&gt; o1       
    return o1.weight - o2.weight;
  }
}

public static Set&lt;Edge&gt; prim(Graph graph){
  PriorityQueue&lt;Edge&gt; queue = new PriorityQueue&lt;&gt;();
  HashSet&lt;Node&gt; set = new HashSet&lt;Node&gt;();
  HashSet&lt;Edge&gt; res = new HashSet&lt;Edge&gt;();
  
  for(Node node : graph.nodes.values()){
    if(!set.contains(node)){
      set.add(node);
      for(Edge edge : node.edges){
        queue.add(edge);
      }
      while(!queue.isEmpty()){
        Edge edge = queue.poll();
        if(!set.contains(edge.to)){
          res.add(edge);
          set.add(edge.to);
          for(Edge e : edge.to.edges){
            queue.add(e);
          }
        }
      }
    }
  }
  return res;
}
</code></pre>
<h2 id="5-dijkstra算法">5. Dijkstra算法</h2>
<pre><code class="language-java">public static HashMap&lt;Node, Integer&gt; dijkstra(Node head){
  
  //distanceMap: 存储出发点至其他各点的距离
  HashMap&lt;Node, Integer&gt; distanceMap = new HashMap&lt;&gt;();
  //lockedSet: 用于记录已锁定的点
  HashSet&lt;Node&gt; lockedSet = new HashSet&lt;&gt;();
  distanceMap.put(head, 0);
  //unlockedMinNode: 找出distanceMap中距离最小且未锁定的点
  Node minNode = unlockedMinNode(distanceMap, lockedSet);
  
  while(minNode != null){
    int dis = distanceMap.get(minNode);
    for(Edge edge : minNode.edges){
      if(!distanceMap.containsKey(edge.to)){
        distanceMap.put(edge.to, dis + edge.weight);
      }
      //若distanceMap中已存在，则比较原距离和新发现的边所更新的距离
      distanceMap.put(edge.to, 
                      Math.min(distanceMap.get(edge.to), 
                      				 dis + edge.weight));
    }
    lockedSet.add(minNode);
    minNode = unlockedMinNode(distanceMap, lockedSet);
  }
  return distanceMap;
}

public static Node unlockedMinNode(
  HashMap&lt;Node, Integer&gt; disMap, HashSet&lt;Node&gt; lockedSet){
  Node minNode = null;
  int minDis = Integer.MAX_VALUE;
  for(Map.Entry&lt;Node, Integer&gt; entry : disMap.entrySet()){
    Node n = entry.getKey();
    int dis = entry.getValue();
    if(!lockedSet.contains(n) &amp;&amp; dis &lt; minDis){
      minNode = n;
      minDis = dis;
    }
  }
  return minNode;
}
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://stevenXu1992.github.io/tag/dNISDHVA_/" class="tag">
                    图
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://stevenXu1992.github.io/post/lian-biao-chang-jian-ti-mu/">
                  <h3 class="post-title">
                    链表的常见算法
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
